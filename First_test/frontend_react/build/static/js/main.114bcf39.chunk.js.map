{"version":3,"sources":["logo.svg","api.js","pages/LoginPage.js","PrivateRoute.js","pages/HomePage.js","ProfileInfoDrawer.js","pages/ProfilePage.js","components/DemandSupplyItem.js","components/DemandSupplyUsers.js","dialogs/CreateDemandDialog.js","dialogs/CreateSupplyDialog.js","components/BookTableRow.js","components/BooksList.js","pages/FindClassBooksPage.js","pages/FindBooksPage.js","PageContainer.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","api","request","url","method","body","bearer","Promise","resolve","reject","fetch","process","headers","sessionStorage","getItem","then","res","status","localStorage","json","error","includes","setItem","access_token","catch","login","email","password","JSON","stringify","refresh_token","loginPaleoID","code","redirect_uri","class","logout","removeItem","isLoggedIn","id","LoginPage","props","handleInputChange","field","e","setState","target","value","handleKeyPress","event","key","handleLogin","isLoading","state","checkLogin","dialogTitle","dialogContent","dialogOpen","handleRegistrationBtn","dialogHandleClose","name","paleoIdUrl","encodeURIComponent","values","queryString","parse","this","location","search","AppBar","position","style","alignItems","Toolbar","Typography","variant","Container","marginTop","src","width","maxWidth","margin","display","Paper","padding","noValidate","autoComplete","textAlign","TextField","label","fullWidth","onChange","onKeyPress","autoFocus","type","LinearProgress","Button","marginRight","onClick","marginLeft","color","href","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","React","Component","withRouter","PrivateRoute","component","auth","wasInitialized","rest","render","to","HomePage","handleLogout","ProfileInfoDrawer","emailmd5","md5","require","toLowerCase","Avatar","alt","height","gutterBottom","marginBottom","ProfilePage","DemandSupplyItem","loading","price","user","CircularProgress","ListItem","button","window","ListItemAvatar","ListItemText","primary","ItemText","float","parseFloat","toFixed","clear","fontSize","DemandSupplyUsers","users","length","List","map","i","CreateDemandDialog","loadSupplies","book","supplies","filter","s","user_id","userDemands","userDemand","createDemand","book_id","snackBarOpen","snackBarSeverity","snackBarMessage","handleClose","deleteDemand","handleSnackbarClose","onEnter","className","title","dividers","Divider","Snackbar","autoHideDuration","severity","Alert","elevation","CreateSupplyDialog","loadDemands","demands","userSupplies","userSupply","createSupply","deleteSupply","handlePriceChange","FormControl","InputLabel","htmlFor","OutlinedInput","defaultValue","startAdornment","InputAdornment","labelWidth","BookTableRow","handleDemandOpen","demandDialogOpen","handleDemandClose","handleSupplyOpen","supplyDialogOpen","handleSupplyClose","TableRow","TableCell","align","photo","isbn","BooksList","TableContainer","Table","aria-label","TableHead","TableBody","books","FindClassBooksPage","handleClassChange","_class","updateYears","handleYearChange","year","updateBooksList","_className","rawClasses","years","c","school_year","classId","classes","Set","sort","console","log","userClass","Select","labelId","item","MenuItem","parseInt","FindBooksPage","handleQueryChange","query","substr","clearTimeout","timer","setTimeout","tooShort","AlertTitle","useStyles","makeStyles","theme","root","drawer","breakpoints","up","flexShrink","appBar","zIndex","menuButton","spacing","toolbar","mixins","drawerPaper","content","flexGrow","down","closeMenuButton","PageContainer","useTheme","useState","mobileOpen","setMobileOpen","anchorEl","setAnchorEl","handleDrawerToggle","IconButton","edge","currentTarget","Icon","keepMounted","Boolean","NavLink","exact","activeClassName","CssBaseline","noWrap","Hidden","mdUp","implementation","Drawer","anchor","direction","paper","ModalProps","smDown","path","App","componentDidMount","chechLogin","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.114bcf39.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","const api = {\n    request: (url = \"\", method = \"GET\", body = null, bearer = null) => {\n        return new Promise((resolve, reject) => {\n            fetch(process.env.REACT_APP_API_URL + url, {\n                method: method,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + (bearer !== null ? bearer : sessionStorage.getItem('access_token'))\n                },\n                body: body\n            }).then(res => {\n                if (res.status < 200 || res.status > 299) {\n                    if (url !== '/auth/login' && url !== '/auth/paleoid' && url !== '/auth/refresh-token' && res.status === 400 && localStorage.getItem('refresh_token') != null) {\n                        res.json().then(res => {\n                            if (res.error.includes('access token')) {\n                                api.request('/auth/refresh-token', 'POST', null, localStorage.getItem('refresh_token')).then((res) => {\n                                    sessionStorage.setItem('access_token', res.access_token);\n                                    api.request(url, method, body).then((res) => {\n                                        resolve(res);\n                                    }).catch(() => {\n                                        reject();\n                                    })\n                                }).catch(() => {\n                                    reject();\n                                })\n                            }\n                            else {\n                                reject(res);\n                            }\n                        })\n                    }\n                    else {\n                        res.json().then(res => {\n                            reject(res);\n                        }).catch(() => {\n                            reject();\n                        });\n                    }\n                } else {\n                    res.json().then(res => {\n                        resolve(res);\n                    })\n                }\n            });\n        });\n    },\n    login: (email, password) => {\n        return new Promise((resolve, reject) => {\n            api.request('/auth/login', 'POST', JSON.stringify({email: email, password: password})).then(res => {\n                sessionStorage.setItem('access_token', res.access_token);\n                localStorage.setItem('refresh_token', res.refresh_token);\n                localStorage.setItem('user_class', '');\n                resolve();\n            }).catch(() => {\n                reject();\n            })\n        });\n    },\n    loginPaleoID: (code) => {\n        return new Promise((resolve, reject) => {\n            api.request('/auth/paleoid', 'POST', JSON.stringify({code: code, redirect_uri: process.env.REACT_APP_PALEOID_REDIRECT_URI})).then(res => {\n                sessionStorage.setItem('access_token', res.access_token);\n                localStorage.setItem('refresh_token', res.refresh_token);\n                localStorage.setItem('user_class', res.class);\n                resolve();\n            }).catch(() => {\n                reject();\n            })\n        });\n    },\n    logout: () => {\n        sessionStorage.removeItem('access_token');\n        localStorage.removeItem('refresh_token')\n    },\n    isLoggedIn: () => {\n        return new Promise((resolve, reject) => {\n            api.request('/users/profile').then(res => {\n                localStorage.setItem('user_id', res.id);\n                localStorage.setItem('user_email', res.email);\n                resolve();\n            }).catch(() => {\n                reject();\n            })\n        });\n    }\n}\n\nexport default api;","import React from 'react';\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport api from \"../api\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport { withRouter } from 'react-router-dom'\nimport queryString from 'query-string'\n\nclass LoginPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {name: '', email: '', password: '', isLoading: false}\n        this.state.paleoIdUrl = process.env.REACT_APP_PALEOID_URL + '/oauth/authorize?client_id=' + process.env.REACT_APP_PALEOID_CLIENT_ID + '&response_type=code&state=paleobooks&redirect_uri=' + encodeURIComponent(process.env.REACT_APP_PALEOID_REDIRECT_URI);\n    }\n\n    componentDidMount() {\n        const values = queryString.parse(this.props.location.search)\n        if (values.state === \"paleobooks\") {\n            this.setState({isLoading: true});\n            api.loginPaleoID(values.code).then(() => {\n                this.props.checkLogin();\n            }).catch(() => {\n                this.setState({dialogTitle: 'Errore', dialogContent: 'Autenticazione con PaleoID fallita', dialogOpen: true});\n                this.setState({isLoading: false})\n            })\n        }\n    }\n\n    handleInputChange = (field, e) => {\n        this.setState({[field]: e.target.value});\n    }\n\n    handleKeyPress = (event) => {\n        if (event.key === 'Enter') {\n            this.handleLogin();\n        }\n    }\n\n    handleLogin = () => {\n        this.setState({isLoading: true})\n        api.login(this.state.email, this.state.password).then((res) => {\n            this.props.checkLogin();\n        }).catch(() => {\n            this.setState({dialogTitle: 'Errore', dialogContent: 'Credenziali non valide', dialogOpen: true});\n            this.setState({isLoading: false})\n        })\n    }\n\n    handleRegistrationBtn = () => {\n        /* TODO: implementare registrazione (si potrebbe fare un form in un dialog che compare premendo questo pulsante) */\n        this.setState({\n            dialogTitle: 'Attenzione',\n            dialogContent: 'Questa funzione non è ancora disponibile',\n            dialogOpen: true\n        });\n    }\n\n    dialogHandleClose = () => {\n        this.setState({dialogOpen: false});\n    }\n\n    render() {\n        return (\n            <>\n                <AppBar position=\"static\" style={{alignItems: 'center'}}>\n                    <Toolbar>\n                        <Typography variant=\"h6\">\n                            PALEObooks\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <Container style={{alignItems: 'center', marginTop: '10px'}}>\n                    <img src=\"https://i.imgur.com/jMTzBKa.png\" style={{width: '30%', maxWidth: '175px', margin: '15px auto', display: 'block'}}/>\n                    <Paper style={{maxWidth: '500px', padding: '15px', margin: '0 auto'}}>\n                        <form noValidate autoComplete=\"off\">\n                            <Typography variant=\"h4\" style={{textAlign: 'center'}}>\n                                Login\n                            </Typography>\n                            <TextField id=\"outlined-basic\" label=\"Email\" variant=\"outlined\" fullWidth\n                                       style={{marginTop: '10px'}}\n                                       onChange={(e) => this.handleInputChange('email', e)}\n                                       onKeyPress={this.handleKeyPress} autoFocus/>\n                            <TextField id=\"outlined-basic\" label=\"Password\" variant=\"outlined\" fullWidth type=\"password\"\n                                       style={{marginTop: '10px'}}\n                                       onChange={(e) => this.handleInputChange('password', e)}\n                                       onKeyPress={this.handleKeyPress}/>\n                            {this.state.isLoading ?\n                                <LinearProgress style={{margin: '8px'}}/> :\n                                <div style={{marginTop: '20px'}}/>\n                            }\n                            <div style={{width: 'fit-content', margin: '0px auto 10px'}}>\n                                <Button variant=\"contained\" style={{marginRight: '4px'}}\n                                        onClick={this.handleLogin}>Accedi</Button>\n                                <Button variant=\"contained\" style={{marginLeft: '4px'}}\n                                        onClick={this.handleRegistrationBtn}>Registrati</Button>\n                            </div>\n                            <div style={{width: 'fit-content', margin: '20px auto 0px'}}>\n                                <Button variant=\"contained\" color=\"primary\" href={this.state.paleoIdUrl}>\n                                    Accedi con PaleoID\n                                </Button>\n                            </div>\n                        </form>\n                    </Paper>\n                    <Dialog\n                        open={this.state.dialogOpen}\n                        onClose={this.dialogHandleClose}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">{this.state.dialogTitle}</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                {this.state.dialogContent}\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={this.dialogHandleClose} color=\"primary\" autoFocus>\n                                Chiudi\n                            </Button>\n                        </DialogActions>\n                    </Dialog>\n                </Container>\n            </>\n        )\n    }\n}\n\nexport default withRouter(LoginPage);","import React from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\n\nconst PrivateRoute = ({\n                          component: Component,\n                          auth,\n                          wasInitialized,\n                          ...rest\n                      }) => {\n    return (\n        <Route\n            {...rest}\n            render={props =>\n                auth === true ? (\n                    <Component {...props} />\n                ) : !wasInitialized ? (\n                    \"\"\n                ) : (\n                    <Redirect to=\"/login\"/>\n                )\n            }\n        />\n    );\n};\n\nexport default PrivateRoute;","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport api from \"../api\";\n\nclass HomePage extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleLogout = () => {\n        api.logout();\n        this.props.checkLogin();\n    }\n\n    render() {\n        return (\n            <>\n                <Typography variant=\"h4\" style={{textAlign: 'center', marginTop: '15px'}}>\n                    Ciao, sono la home page!\n                </Typography>\n                <Button variant=\"contained\" color=\"secondary\" style={{margin: '10px auto', display: 'block'}}\n                        onClick={this.handleLogout}>Logout</Button>\n            </>\n        );\n    }\n}\n\nexport default HomePage;","import Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React from \"react\";\nimport api from \"./api\";\n\n\nclass ProfileInfoDrawer extends React.Component {\n    constructor() {\n        super();\n        this.state = {name: '', email: '', emailmd5: ''};\n    }\n\n    componentDidMount() {\n        api.request('/users/profile').then(res => {\n            var md5 = require('md5');\n            this.setState({name: res.name, email: res.email, emailmd5: md5(res.email.toLowerCase())})\n        })\n    }\n\n    render() {\n        return (<>\n                <Avatar alt={this.state.name} src={\"https://gravatar.com/avatar/\" + this.state.emailmd5 + \"?d=retro\"}\n                        style={{width: '56px', height: '56px'}}/>\n                <Typography variant=\"subtitle1\" gutterBottom style={{marginTop: '0.4rem', marginBottom: '-0.3rem'}}>\n                    {this.state.name}\n                </Typography>\n                <Typography variant=\"caption\" gutterBottom>\n                    {this.state.email}\n                </Typography>\n            </>\n        );\n    }\n}\n\nexport default ProfileInfoDrawer;","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nclass ProfilePage extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <>\n                <Typography variant=\"h4\" style={{textAlign: 'center', marginTop: '15px'}}>\n                    Questa è la pagina del profilo\n                </Typography>\n            </>\n        );\n    }\n}\n\nexport default ProfilePage;","import React from \"react\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport api from \"../api\";\n\nclass DemandSupplyItem extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, name: '', email: '', emailmd5: '', price: 0.00};\n    }\n\n    componentDidMount() {\n        if (this.props.type == 'supply') {\n            api.request('/supplies/' + this.props.id).then((res) => {\n                var md5 = require('md5');\n                this.setState({\n                    loading: false,\n                    name: res.user.name,\n                    email: res.user.email,\n                    emailmd5: md5(res.user.email.toLowerCase()),\n                    price: res.price\n                })\n            })\n        } else if (this.props.type == 'demand') {\n            api.request('/demands/' + this.props.id).then((res) => {\n                var md5 = require('md5');\n                this.setState({\n                    loading: false,\n                    name: res.user.name,\n                    email: res.user.email,\n                    emailmd5: md5(res.user.email.toLowerCase()),\n                    price: res.price\n                })\n            })\n        }\n    }\n\n    render() {\n        if (this.state.loading) {\n            return <div style={{margin: '20px auto', width: 'fit-content'}}><CircularProgress/></div>\n        }\n        return (\n            <ListItem button onClick={() => window.open('mailto:' + this.state.email, \"_blank\")}\n                      style={{padding: '6px 8px'}}>\n                <ListItemAvatar>\n                    <Avatar alt={this.state.name}\n                            src={\"https://gravatar.com/avatar/\" + this.state.emailmd5 + \"?d=retro\"}\n                    />\n                </ListItemAvatar>\n                <ListItemText\n                    primary={<ItemText name={this.state.name} price={this.state.price} email={this.state.email}/>}/>\n            </ListItem>\n        );\n    }\n}\n\nconst ItemText = (props) => {\n    return (\n        <div>\n            <p style={{float: 'left', marginTop: '8px'}}>{props.name}</p>\n            {props.price != null ? <>\n                    <p style={{float: 'right', marginTop: '16px'}}>€ {parseFloat(props.price).toFixed(2)}</p>\n                    <p style={{\n                        float: 'left',\n                        clear: 'both',\n                        fontSize: '0.8em',\n                        color: '#555',\n                        marginTop: '-28px'\n                    }}>{props.email}</p>\n                </> :\n                <p style={{\n                    float: 'left',\n                    clear: 'both',\n                    fontSize: '0.8em',\n                    color: '#555',\n                    marginTop: '-22px'\n                }}>{props.email}</p>\n            }\n        </div>\n    );\n}\n\nexport default DemandSupplyItem;","import * as React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport DemandSupplyItem from \"./DemandSupplyItem\";\n\n\nclass DemandSupplyUsers extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <>\n                <Typography gutterBottom>\n                    {this.props.users.length == 1 ? <>C'è <b>1</b> utente che {this.props.type == 'supply' ? 'sta' : 'vuole'}</> : <>Ci\n                        sono <b>{this.props.users.length}</b> utenti che {this.props.type == 'supply' ? 'stanno' : 'vogliono'}</>}\n                    &nbsp;{this.props.type == 'supply' ? 'vendendo' : 'acquistare'} questo libro,\n                    contattal{this.props.users.length == 1 ? 'o' : 'i'} se sei interessato.\n                </Typography>\n                <List style={{margin: '-16px 0'}}>\n                    {this.props.users.map(i => {\n                        return <DemandSupplyItem id={i.id} type={this.props.type}/>\n                    })}\n                </List>\n            </>\n        )\n    }\n}\n\nexport default DemandSupplyUsers;","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport api from \"../api\";\nimport Link from \"@material-ui/core/Link\";\nimport {NavLink} from \"react-router-dom\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport DemandSupplyItem from \"../components/DemandSupplyItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport DemandSupplyUsers from \"../components/DemandSupplyUsers\";\n\n\nclass CreateDemandDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, supplies: [], userDemand: null};\n    }\n\n    loadSupplies = () => {\n        api.request('/books/' + this.props.book.id + '/supplies').then((res) => {\n            this.setState({\n                supplies: res.filter((s) => {\n                    return s.user_id != localStorage.getItem('user_id');\n                })\n            })\n            api.request('/books/' + this.props.book.id + '/demands').then((res) => {\n                let userDemands = res.filter((s) => {\n                    return s.user_id == localStorage.getItem('user_id');\n                })\n                if (userDemands.length > 0) {\n                    this.setState({userDemand: userDemands[0]});\n                }\n                else {\n                    this.setState({userDemand: null});\n                }\n                this.setState({loading: false});\n            })\n        })\n    }\n\n    createDemand = () => {\n        api.request('/demands', 'POST', JSON.stringify({book_id: this.props.book.id})).then(() => {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'success',\n                snackBarMessage: 'Annuncio creato correttamente!'\n            });\n            this.props.handleClose();\n        }).catch((res) => {\n            if (res.error == \"You already have a demand for this book.\") {\n                res.error = \"Hai già un annuncio per questo libro.\"\n            }\n            this.setState({snackBarOpen: true, snackBarSeverity: 'error', snackBarMessage: res.error});\n            this.props.handleClose();\n        });\n    }\n\n    deleteDemand = () => {\n        if (this.state.userDemand === null) {\n            return;\n        }\n        api.request('/demands/' + this.state.userDemand.id, 'DELETE').then(() => {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'success',\n                snackBarMessage: 'Annuncio eliminato correttamente!',\n                userDemand: null\n            });\n            this.props.handleClose();\n        }).catch((res) => {\n            this.setState({snackBarOpen: true, snackBarSeverity: 'error', snackBarMessage: res.error});\n            this.props.handleClose();\n        });\n    }\n\n    handleClose = () => {\n        this.props.handleClose();\n    }\n\n    handleSnackbarClose = () => {\n        this.setState({snackBarOpen: false});\n    }\n\n    render() {\n        return (\n            <>\n                <Dialog onClose={this.handleClose} aria-labelledby=\"customized-dialog-title\" open={this.props.open}\n                        onEnter={this.loadSupplies}>\n                    <DialogTitle className=\"dialog-title-text-ellipsis\" onClose={this.handleClose}>\n                        {this.props.book.title}\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        {this.state.loading ?\n                            <div style={{margin: '20px auto', width: 'fit-content'}}><CircularProgress/></div> : (\n                                <>\n                                    {this.state.supplies.length > 0 ?\n                                        <>\n                                            <DemandSupplyUsers users={this.state.supplies} type='supply'/>\n                                            <Divider style={{margin: '8px 0 12px'}}/>\n                                            {this.state.userDemand === null ? <><Typography gutterBottom>\n                                                Oppure crea un annuncio per essere contattato da altri venditori.\n                                            </Typography>\n                                                <Typography gutterBottom>\n                                                    Verrà condiviso il tuo nome e l'indirizzo\n                                                    email <i>{localStorage.getItem('user_email')}</i>.<br/>\n                                                    Se non è corretto, modificalo dal tuo <NavLink to=\"/profile\"\n                                                                                                   style={{color: '#0000ee'}}>profilo</NavLink>.\n                                                </Typography>\n                                            </> : null}\n                                        </> :\n                                        (this.state.userDemand === null ? <>\n                                                <Typography gutterBottom>\n                                                    Sei interessato ad acquistare questo libro?<br/>\n                                                    Crea un annuncio per essere contattato dai possibili venditori!\n                                                </Typography>\n                                                <Typography gutterBottom>\n                                                    Verrà condiviso il tuo nome e l'indirizzo\n                                                    email <i>{localStorage.getItem('user_email')}</i>.<br/>\n                                                    Se non è corretto, modificalo dal tuo <NavLink to=\"/profile\"\n                                                                                                   style={{color: '#0000ee'}}>profilo</NavLink>.\n                                                </Typography>\n                                            </> :\n                                            null)}\n                                    {this.state.userDemand !== null ? <Typography gutterBottom>\n                                        Hai già un annuncio per questo libro. Se l'hai già acquistato e non ti serve\n                                        più, clicca sul pulsante qui sotto per eliminarlo.\n                                    </Typography> : null}\n                                </>)\n                        }\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.props.handleClose} color=\"primary\">\n                            Annulla\n                        </Button>\n                        {this.state.userDemand === null ? <Button autoFocus onClick={this.createDemand} color=\"primary\">\n                            Crea annuncio\n                        </Button> : <Button autoFocus onClick={this.deleteDemand} color=\"secondary\">\n                            Elimina annuncio\n                        </Button>}\n                    </DialogActions>\n\n                </Dialog>\n                <Snackbar open={this.state.snackBarOpen} autoHideDuration={6000} onClose={this.handleSnackbarClose}>\n                    <Alert onClose={this.handleSnackbarClose} severity={this.state.snackBarSeverity}>\n                        {this.state.snackBarMessage}\n                    </Alert>\n                </Snackbar>\n            </>\n        );\n    }\n}\n\nconst Alert = (props) => {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default CreateDemandDialog;","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport api from \"../api\";\nimport Link from \"@material-ui/core/Link\";\nimport {NavLink} from \"react-router-dom\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport DemandSupplyItem from \"../components/DemandSupplyItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport DemandSupplyUsers from \"../components/DemandSupplyUsers\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Input from \"@material-ui/core/Input\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\n\n\nclass CreateSupplyDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, demands: [], userSupply: null, price: 0};\n    }\n\n    loadDemands = () => {\n        api.request('/books/' + this.props.book.id + '/demands').then((res) => {\n            this.setState({\n                demands: res.filter((s) => {\n                    return s.user_id != localStorage.getItem('user_id');\n                })\n            });\n            api.request('/books/' + this.props.book.id + '/supplies').then((res) => {\n                let userSupplies = res.filter((s) => {\n                    return s.user_id == localStorage.getItem('user_id');\n                })\n                if (userSupplies.length > 0) {\n                    this.setState({userSupply: userSupplies[0]});\n                }\n                else {\n                    this.setState({userSupply: null});\n                }\n                this.setState({loading: false});\n            })\n        })\n    }\n\n    createSupply = () => {\n        if (parseFloat(this.state.price) < 0) {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'warning',\n                snackBarMessage: 'Il prezzo non può essere inferiore a 0'\n            });\n            return;\n        }\n        if (parseFloat(this.state.price) > this.props.book.price) {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'warning',\n                snackBarMessage: 'Il prezzo non può essere superiore a €' + this.props.book.price\n            });\n            return;\n        }\n        api.request('/supplies', 'POST', JSON.stringify({\n            book_id: this.props.book.id,\n            price: parseFloat(this.state.price)\n        })).then(() => {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'success',\n                snackBarMessage: 'Annuncio creato correttamente!'\n            });\n            this.props.handleClose();\n        }).catch((res) => {\n            if (res.error == \"You already have a supply for this book.\") {\n                res.error = \"Hai già un annuncio di vendita per questo libro.\"\n            }\n            this.setState({snackBarOpen: true, snackBarSeverity: 'error', snackBarMessage: res.error});\n            this.props.handleClose();\n        });\n    }\n\n    deleteSupply = () => {\n        if (this.state.userSupply === null) {\n            return;\n        }\n        api.request('/supplies/' + this.state.userSupply.id, 'DELETE').then(() => {\n            this.setState({\n                snackBarOpen: true,\n                snackBarSeverity: 'success',\n                snackBarMessage: 'Annuncio eliminato correttamente!',\n                userSupply: null\n            });\n            this.props.handleClose();\n        }).catch((res) => {\n            this.setState({snackBarOpen: true, snackBarSeverity: 'error', snackBarMessage: res.error});\n            this.props.handleClose();\n        });\n    }\n\n    handleClose = () => {\n        this.props.handleClose();\n    }\n\n    handleSnackbarClose = () => {\n        this.setState({snackBarOpen: false});\n    }\n\n    handlePriceChange = (event) => {\n        this.setState({price: event.target.value});\n    }\n\n    render() {\n        return (\n            <>\n                <Dialog onClose={this.handleClose} aria-labelledby=\"customized-dialog-title\" open={this.props.open}\n                        onEnter={this.loadDemands}>\n                    <DialogTitle className=\"dialog-title-text-ellipsis\" onClose={this.handleClose}>\n                        {this.props.book.title}\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        {this.state.loading ?\n                            <div style={{margin: '20px auto', width: 'fit-content'}}><CircularProgress/></div> : (\n                                <>\n                                    {this.state.demands.length > 0 ?\n                                        <>\n                                            <DemandSupplyUsers users={this.state.demands} type='demand'/>\n                                            <Divider style={{margin: '8px 0 12px'}}/>\n                                            {this.state.userSupply === null ? <><Typography gutterBottom>\n                                                Oppure crea un annuncio per essere contattato da altri possibili\n                                                acquirenti.\n                                            </Typography>\n                                                <Typography gutterBottom>\n                                                    Verrà condiviso il tuo nome e l'indirizzo\n                                                    email <i>{localStorage.getItem('user_email')}</i>.<br/>\n                                                    Se non è corretto, modificalo dal tuo <NavLink to=\"/profile\"\n                                                                                                   style={{color: '#0000ee'}}>profilo</NavLink>.\n                                                </Typography>\n                                            </> : null}\n                                        </> : (this.state.userSupply === null ? <><Typography gutterBottom>\n                                            Vuoi vendere questo libro?<br/>\n                                            Crea un annuncio per essere contattato dai possibili acquirenti!\n                                        </Typography>\n                                            <Typography gutterBottom>\n                                                Verrà condiviso il tuo nome e l'indirizzo\n                                                email <i>{localStorage.getItem('user_email')}</i>.<br/>\n                                                Se non è corretto, modificalo dal tuo <NavLink to=\"/profile\"\n                                                                                               style={{color: '#0000ee'}}>profilo</NavLink>.\n                                            </Typography>\n                                        </> : null)}\n                                    {this.state.userSupply !== null ? <Typography gutterBottom>\n                                        Hai già un annuncio di vendita per questo libro al prezzo\n                                        di <b>€{this.state.userSupply.price}</b>. Se l'hai già venduto e non ti serve\n                                        più, clicca sul pulsante qui sotto per eliminarlo.\n                                    </Typography> : null}\n                                </>)\n                        }\n                        {this.state.userSupply === null ?\n                            <FormControl fullWidth variant=\"outlined\" style={{marginTop: '8px'}}>\n                                <InputLabel htmlFor=\"outlined-adornment-amount\">Prezzo di vendita</InputLabel>\n                                <OutlinedInput id=\"outlined-adornment-amount\"\n                                               onChange={(e) => this.handlePriceChange(e)}\n                                               type=\"number\"\n                                               defaultValue={0}\n                                               startAdornment={<InputAdornment position=\"start\">€</InputAdornment>}\n                                               labelWidth={125}/>\n                            </FormControl> : null}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.props.handleClose} color=\"primary\">\n                            Annulla\n                        </Button>\n                        {this.state.userSupply === null ? <Button autoFocus onClick={this.createSupply} color=\"primary\">\n                            Crea annuncio\n                        </Button> : <Button autoFocus onClick={this.deleteSupply} color=\"secondary\">\n                            Elimina annuncio\n                        </Button>\n                        }\n                    </DialogActions>\n\n                </Dialog>\n                <Snackbar open={this.state.snackBarOpen} autoHideDuration={6000} onClose={this.handleSnackbarClose}>\n                    <Alert onClose={this.handleSnackbarClose} severity={this.state.snackBarSeverity}>\n                        {this.state.snackBarMessage}\n                    </Alert>\n                </Snackbar>\n            </>\n        );\n    }\n}\n\nconst Alert = (props) => {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default CreateSupplyDialog;","import TableCell from \"@material-ui/core/TableCell\";\nimport Button from \"@material-ui/core/Button\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport React from \"react\";\nimport CreateDemandDialog from \"../dialogs/CreateDemandDialog\";\nimport CreateSupplyDialog from \"../dialogs/CreateSupplyDialog\";\n\nclass BookTableRow extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {demandDialogOpen: false, supplyDialogOpen: false};\n    }\n\n    handleDemandOpen = () => {\n        this.setState({demandDialogOpen: true});\n    }\n\n    handleDemandClose = () => {\n        this.setState({demandDialogOpen: false});\n    }\n\n    handleSupplyOpen = () => {\n        this.setState({supplyDialogOpen: true});\n    }\n\n    handleSupplyClose = () => {\n        this.setState({supplyDialogOpen: false});\n    }\n\n    render() {\n        return (\n            <TableRow key={this.props.book.id}>\n                <TableCell align=\"center\"><img src={this.props.book.photo} height='100px'/></TableCell>\n                <TableCell align=\"left\">{this.props.book.title}</TableCell>\n                <TableCell align=\"left\">{this.props.book.isbn}</TableCell>\n                <TableCell align=\"left\">€{this.props.book.price}</TableCell>\n                <TableCell align=\"center\">\n                    <Button variant=\"outlined\" color=\"primary\" style={{margin: '4px'}} onClick={this.handleDemandOpen}>\n                        Cerca\n                    </Button>\n                    <Button variant=\"outlined\" color=\"primary\" style={{margin: '4px'}} onClick={this.handleSupplyOpen}>\n                        Offri\n                    </Button>\n                </TableCell>\n                <CreateDemandDialog book={this.props.book} open={this.state.demandDialogOpen} handleClose={this.handleDemandClose} />\n                <CreateSupplyDialog book={this.props.book} open={this.state.supplyDialogOpen} handleClose={this.handleSupplyClose} />\n            </TableRow>\n        );\n    }\n}\n\nexport default BookTableRow;","import Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport BookTableRow from \"./BookTableRow\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport React from \"react\";\n\n\nclass BooksList extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        return (\n            <TableContainer component={Paper} style={{marginTop: '20px'}}>\n                <Table aria-label=\"simple table\">\n                    <TableHead>\n                        <TableRow>\n                            <TableCell align=\"center\">Immagine</TableCell>\n                            <TableCell align=\"left\">Titolo</TableCell>\n                            <TableCell align=\"left\">ISBN</TableCell>\n                            <TableCell align=\"left\">Prezzo</TableCell>\n                            <TableCell align=\"center\">Azioni</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {this.props.books.map((book) => (\n                            <BookTableRow key={book.id} book={book}/>\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        )\n    }\n}\n\nexport default BooksList;","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport api from \"../api\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport BookTableRow from \"../components/BookTableRow\";\nimport BooksList from \"../components/BooksList\";\n\nclass FindClassBooksPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {classes: [], _class: '', years: [], year: '', books: []};\n    }\n\n    componentDidMount() {\n        api.request('/classes').then(res => {\n            let classes = res.map((c) => c.name);\n            classes = [...new Set(classes)].sort();\n            console.log(res);\n            this.setState({rawClasses: res, classes: classes});\n            let userClass = localStorage.getItem('user_class');\n            if (userClass.length > 0 && classes.includes(userClass)) {\n                this.setState({_class: userClass});\n                this.updateYears(userClass);\n            }\n        })\n    }\n\n    handleClassChange = (event) => {\n        this.setState({_class: event.target.value});\n        this.updateYears(event.target.value);\n    }\n\n    handleYearChange = (event) => {\n        this.setState({year: event.target.value});\n        this.updateBooksList(this.state._class, event.target.value);\n    }\n\n    updateYears = (_className) => {\n        if (this.state.rawClasses == null) return;\n        let years = this.state.rawClasses.filter((c) => {\n            return c.name == _className;\n        }).map((c) => {\n            return c.school_year;\n        })\n        this.setState({years: years, year: years[0]})\n        this.updateBooksList(_className, years[0]);\n    }\n\n    updateBooksList = (_className, year) => {\n        let _class = this.state.rawClasses.filter((c) => {\n            return c.name == _className && c.school_year == year;\n        })\n        let classId = _class[0].id;\n        api.request('/classes/' + classId + '/books').then(res => {\n            this.setState({books: res});\n        })\n    }\n\n    render() {\n        if (this.state.classes.length == 0)\n            return <div style={{margin: '20px auto', width: 'fit-content'}}><CircularProgress/></div>;\n        return (\n            <>\n                <Typography variant=\"h5\" style={{textAlign: 'center', marginTop: '15px'}}>\n                    Cerca i libri della tua classe!\n                </Typography>\n                <div style={{width: 'fit-content', margin: '5px auto'}}>\n                    <FormControl style={{width: '80px', marginRight: '5px'}}>\n                        <InputLabel id=\"demo-simple-select-label\">Classe</InputLabel>\n                        <Select\n                            labelId=\"demo-simple-select-label\"\n                            onChange={this.handleClassChange}\n                            value={this.state._class}\n                        >\n                            {this.state.classes.map((item) => {\n                                return <MenuItem value={item}>{item}</MenuItem>\n                            })}\n                        </Select>\n                    </FormControl>\n                    <FormControl style={{width: '160px', marginLeft: '5px'}}>\n                        <InputLabel id=\"demo-simple-select-label\">Anno scolastico</InputLabel>\n                        <Select\n                            labelId=\"demo-simple-select-label\"\n                            onChange={this.handleYearChange}\n                            value={this.state.year}\n                        >\n                            {this.state.years.map((item) => {\n                                return <MenuItem value={item}>{item}/{parseInt(item) + 1}</MenuItem>\n                            })}\n                        </Select>\n                    </FormControl>\n                </div>\n                {this.state.books.length > 0 ? <BooksList books={this.state.books}/> : null}\n            </>\n        );\n    }\n}\n\nexport default FindClassBooksPage;","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport api from \"../api\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport BookTableRow from \"../components/BookTableRow\";\nimport BooksList from \"../components/BooksList\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\n\nclass FindBooksPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {books: [], tooShort: false, timer: null, loading: null};\n    }\n\n    componentDidMount() {\n\n    }\n\n    handleQueryChange = (e) => {\n        this.setState({loading: true});\n        let query = e.target.value;\n        if (query.length < 4 || (query.substr(0, 4) == '9788' && query.length != 13)) {\n            clearTimeout(this.state.timer);\n            this.setState({\n                timer: setTimeout(() => {\n                    this.setState({books: [], tooShort: true, loading: false});\n                }, 800)\n            });\n        } else {\n            clearTimeout(this.state.timer);\n            this.setState({\n                timer: setTimeout(() => {\n                    this.updateBooksList(query);\n                }, 300)\n            });\n            this.setState({tooShort: false});\n        }\n    }\n\n    updateBooksList = (query) => {\n        api.request('/books?search=' + encodeURIComponent(query)).then(res => {\n            this.setState({books: res, loading: false});\n        })\n    }\n\n    render() {\n        return (\n            <>\n                <Typography variant=\"h5\" style={{textAlign: 'center', marginTop: '15px'}}>\n                    Inserisci il titolo o il codice ISBN\n                </Typography>\n                <div style={{width: 'fit-content', margin: '5px auto'}}>\n                    <FormControl style={{width: '100%'}}>\n                        <TextField id=\"standard-basic\" label=\"Ricerca libri\" onChange={this.handleQueryChange}/>\n                    </FormControl>\n                </div>\n                {(this.state.tooShort && this.state.loading === false) ? <Alert severity=\"warning\" style={{maxWidth: '500px', margin: '15px auto'}}>\n                    <AlertTitle>Attenzione</AlertTitle>\n                    Devi inserire almeno <strong>4 caratteri</strong> oppure il codice <strong>ISBN</strong> completo!\n                </Alert> : ((this.state.books.length == 0 && this.state.loading === false) ?\n                    <Alert severity=\"error\" style={{maxWidth: '300px', margin: '15px auto'}}>\n                        <AlertTitle>Attenzione</AlertTitle>\n                        Nessun libro trovato.\n                    </Alert> : (this.state.loading === false &&\n                        <Alert severity=\"info\" style={{maxWidth: '300px', margin: '15px auto'}}>\n                            {this.state.books.length == 1 ? 'È stato trovato' : 'Sono stati trovati'}\n                            &nbsp;<strong>{this.state.books.length}</strong> libr{this.state.books.length == 1 ? 'o' : 'i'}.\n                        </Alert>))}\n                {this.state.loading === true ?\n                    <div style={{margin: '30px auto', width: 'fit-content'}}><CircularProgress/></div> :\n                    (this.state.books.length > 0 ? <BooksList books={this.state.books}/> : null)}\n            </>\n        );\n    }\n}\n\nexport default FindBooksPage;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles, useTheme} from '@material-ui/core/styles';\nimport {BrowserRouter, NavLink, Redirect, Route, Switch} from \"react-router-dom\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport api from \"./api\";\nimport ProfileInfoDrawer from \"./ProfileInfoDrawer\";\nimport HomePage from \"./pages/HomePage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport FindClassBooksPage from \"./pages/FindClassBooksPage\";\nimport FindBooksPage from \"./pages/FindBooksPage\";\n\nconst drawerWidth = 240;\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n    },\n    drawer: {\n        [theme.breakpoints.up('md')]: {\n            width: drawerWidth,\n            flexShrink: 0,\n        },\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n    },\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n        width: drawerWidth\n    },\n    content: {\n        flexGrow: 1,\n        padding: theme.spacing(3),\n        marginTop: '54px',\n        [theme.breakpoints.down('xs')]: {\n            marginTop: '40px'\n        },\n    },\n    closeMenuButton: {\n        marginRight: 'auto',\n        marginLeft: 0,\n    },\n}));\n\nfunction PageContainer(props) {\n    const dummyCategories = ['Hokusai', 'Hiroshige', 'Utamaro', 'Kuniyoshi', 'Yoshitoshi']\n    const classes = useStyles();\n    const theme = useTheme();\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    function handleDrawerToggle() {\n        setMobileOpen(!mobileOpen)\n    }\n\n    const openProfileMenu = (event) => {\n        setAnchorEl(event.currentTarget);\n    }\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    }\n\n    const handleLogout = () => {\n        handleClose();\n        api.logout();\n        props.checkLogin();\n    }\n\n    const drawer = (\n        <div>\n            <div style={{padding: '12px'}}>\n                <ProfileInfoDrawer/>\n\n                <IconButton\n                    edge=\"start\"\n                    color=\"inherit\"\n                    style={{margin: 0, padding: 0, float: 'right'}}\n                    onClick={openProfileMenu}\n                >\n                    <Icon>expand_more</Icon>\n                </IconButton>\n                <Menu\n                    anchorEl={anchorEl}\n                    keepMounted\n                    open={Boolean(anchorEl)}\n                    onClose={handleClose}\n                >\n                    <MenuItem onClick={handleClose} component={NavLink} to=\"/profile\" >Profilo</MenuItem>\n                    <MenuItem onClick={handleLogout}>Logout</MenuItem>\n                </Menu>\n            </div>\n            <Divider variant=\"middle\" style={{margin: '0'}}/>\n            <List>\n                <ListItem button key=\"/\" component={NavLink} exact to=\"/\" activeClassName=\"Mui-selected\">\n                    <ListItemText primary=\"Home\"/>\n                </ListItem>\n                <ListItem button key=\"/books\" component={NavLink} to=\"/books\" activeClassName=\"Mui-selected\">\n                    <ListItemText primary=\"Ricerca libri\"/>\n                </ListItem>\n                <ListItem button key=\"/class-books\" component={NavLink} to=\"/class-books\" activeClassName=\"Mui-selected\">\n                    <ListItemText primary=\"Ricerca libri classe\"/>\n                </ListItem>\n            </List>\n        </div>\n    );\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <AppBar position=\"fixed\" className={classes.appBar}>\n                <Toolbar>\n                    <IconButton\n                        color=\"inherit\"\n                        aria-label=\"Open drawer\"\n                        edge=\"start\"\n                        onClick={handleDrawerToggle}\n                        className={classes.menuButton}\n                    >\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        PALEObooks\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n\n            <nav className={classes.drawer}>\n                {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n                <Hidden mdUp implementation=\"css\">\n                    <Drawer\n                        variant=\"temporary\"\n                        anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n                        open={mobileOpen}\n                        onClose={handleDrawerToggle}\n                        classes={{\n                            paper: classes.drawerPaper,\n                        }}\n                        ModalProps={{\n                            keepMounted: true,\n                        }}\n                    >\n                        {drawer}\n                    </Drawer>\n                </Hidden>\n                <Hidden smDown implementation=\"css\">\n                    <Drawer\n                        className={classes.drawer}\n                        variant=\"permanent\"\n                        classes={{\n                            paper: classes.drawerPaper,\n                        }}\n                    >\n                        <div className={classes.toolbar}/>\n                        {drawer}\n                    </Drawer>\n                </Hidden>\n            </nav>\n            <div className={classes.content}>\n                <div>\n                    <Switch>\n                        <Route exact path=\"/\">\n                            <HomePage checkLogin={props.checkLogin}/>\n                        </Route>\n                        <Route path=\"/profile\">\n                            <ProfilePage/>\n                        </Route>\n                        <Route path=\"/books\">\n                            <FindBooksPage/>\n                        </Route>\n                        <Route path=\"/class-books\">\n                            <FindClassBooksPage/>\n                        </Route>\n\n                    </Switch>\n\n                </div>\n            </div>\n        </div>\n\n    );\n}\n\nexport default PageContainer;","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Container from \"@material-ui/core/Container\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport {BrowserRouter, Redirect, Route, Switch} from \"react-router-dom\";\nimport LoginPage from \"./pages/LoginPage\";\nimport api from \"./api\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport HomePage from \"./pages/HomePage\";\nimport PageContainer from \"./PageContainer\";\n\nclass App extends React.Component {\n    constructor() {\n        super();\n        this.state = {error: false, isLoggedIn: null, wasInitialized: false}\n    }\n\n    componentDidMount = () => {\n        this.chechLogin();\n        setTimeout(() => {\n            if (this.state.isLoggedIn === null) {\n                this.setState({error: true})\n            }\n        }, 5000);\n    }\n\n    chechLogin = () => {\n        api.isLoggedIn().then(() => {\n            this.setState({isLoggedIn: true, wasInitialized: true});\n            console.log(true);\n        }).catch(() => {\n            this.setState({isLoggedIn: false, wasInitialized: true});\n            console.log(false);\n        });\n    }\n\n    render = () => {\n        if (this.state.error === true) return <div style={{textAlign: 'center'}}><h1>Impossibile comunicare con il server</h1><h2>Riprova più tardi</h2><h4>PALEObooks</h4></div>\n        if (this.state.isLoggedIn === null) return <div style={{margin: '20px auto', width: 'fit-content'}}><CircularProgress /></div>;\n        return (\n            <BrowserRouter>\n                <Switch>\n                    <Route exact path=\"/login\">\n                        {this.state.isLoggedIn\n                            ? <Redirect to=\"\"/>\n                            : <LoginPage checkLogin={this.chechLogin}/>}\n                    </Route>\n                    <PrivateRoute auth={this.state.isLoggedIn} wasInitialized={this.state.wasInitialized} exact component={() => <PageContainer checkLogin={this.chechLogin} />} path=\"*\"/>\n                    <Route path=\"*\">\n                        <Redirect to=\"\"/>\n                    </Route>\n                </Switch>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}